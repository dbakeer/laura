"use strict";function _classCallCheck(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}}();!function($){var t=function(){function t(i,e){_classCallCheck(this,t),this.$element=i,this.options=$.extend({},t.defaults,this.$element.data(),e),this.isActive=!1,this.isClick=!1,this._init(),Foundation.registerPlugin(this,"Tooltip")}return _createClass(t,[{key:"_init",value:function t(){var i=this.$element.attr("aria-describedby")||Foundation.GetYoDigits(6,"tooltip");this.options.positionClass=this._getPositionClass(this.$element),this.options.tipText=this.options.tipText||this.$element.attr("title"),this.template=this.options.template?$(this.options.template):this._buildTemplate(i),this.template.appendTo(document.body).text(this.options.tipText).hide(),this.$element.attr({title:"","aria-describedby":i,"data-yeti-box":i,"data-toggle":i,"data-resize":i}).addClass(this.triggerClass),this.usedPositions=[],this.counter=4,this.classChanged=!1,this._events()}},{key:"_getPositionClass",value:function t(i){if(!i)return"";var e=i[0].className.match(/\b(top|left|right)\b/g);return e=e?e[0]:""}},{key:"_buildTemplate",value:function t(i){var e=(this.options.tooltipClass+" "+this.options.positionClass+" "+this.options.templateClasses).trim();return $("<div></div>").addClass(e).attr({role:"tooltip","aria-hidden":!0,"data-is-active":!1,"data-is-focus":!1,id:i})}},{key:"_reposition",value:function t(i){this.usedPositions.push(i||"bottom"),!i&&this.usedPositions.indexOf("top")<0?this.template.addClass("top"):"top"===i&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(i):"left"===i&&this.usedPositions.indexOf("right")<0?this.template.removeClass(i).addClass("right"):"right"===i&&this.usedPositions.indexOf("left")<0?this.template.removeClass(i).addClass("left"):!i&&this.usedPositions.indexOf("top")>-1&&this.usedPositions.indexOf("left")<0?this.template.addClass("left"):"top"===i&&this.usedPositions.indexOf("bottom")>-1&&this.usedPositions.indexOf("left")<0?this.template.removeClass(i).addClass("left"):"left"===i&&this.usedPositions.indexOf("right")>-1&&this.usedPositions.indexOf("bottom")<0?this.template.removeClass(i):("right"===i&&this.usedPositions.indexOf("left")>-1&&this.usedPositions.indexOf("bottom"),this.template.removeClass(i)),this.classChanged=!0,this.counter--}},{key:"_setPosition",value:function t(){var i=this._getPositionClass(this.template),e=Foundation.Box.GetDimensions(this.template),s=Foundation.Box.GetDimensions(this.$element),o="left"===i?"left":"right"===i?"left":"top",n="top"===o?"height":"width",a="height"===n?this.options.vOffset:this.options.hOffset,l=this;if(e.width>=e.windowDims.width||!this.counter&&!Foundation.Box.ImNotTouchingYou(this.template))return this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center bottom",this.options.vOffset,this.options.hOffset,!0)).css({width:s.windowDims.width-2*this.options.hOffset,height:"auto"}),!1;for(this.template.offset(Foundation.Box.GetOffsets(this.template,this.$element,"center "+(i||"bottom"),this.options.vOffset,this.options.hOffset));!Foundation.Box.ImNotTouchingYou(this.template)&&this.counter;)this._reposition(i),this._setPosition()}},{key:"show",value:function t(){if("all"!==this.options.showOn&&!Foundation.MediaQuery.atLeast(this.options.showOn))return!1;var i=this;this.template.css("visibility","hidden").show(),this._setPosition(),this.$element.trigger("closeme.zf.tooltip",this.template.attr("id")),this.template.attr({"data-is-active":!0,"aria-hidden":!1}),i.isActive=!0,this.template.stop().hide().css("visibility","").fadeIn(this.options.fadeInDuration,function(){}),this.$element.trigger("show.zf.tooltip")}},{key:"hide",value:function t(){var i=this;this.template.stop().attr({"aria-hidden":!0,"data-is-active":!1}).fadeOut(this.options.fadeOutDuration,function(){i.isActive=!1,i.isClick=!1,i.classChanged&&(i.template.removeClass(i._getPositionClass(i.template)).addClass(i.options.positionClass),i.usedPositions=[],i.counter=4,i.classChanged=!1)}),this.$element.trigger("hide.zf.tooltip")}},{key:"_events",value:function t(){var i=this,e=this.template,s=!1;this.options.disableHover||this.$element.on("mouseenter.zf.tooltip",function(t){i.isActive||(i.timeout=setTimeout(function(){i.show()},i.options.hoverDelay))}).on("mouseleave.zf.tooltip",function(t){clearTimeout(i.timeout),(!s||!i.isClick&&i.options.clickOpen)&&i.hide()}),this.options.clickOpen&&this.$element.on("mousedown.zf.tooltip",function(t){t.stopImmediatePropagation(),i.isClick?i.hide():(i.isClick=!0,!i.options.disableHover&&i.$element.attr("tabindex")||i.isActive||i.show())}),this.options.disableForTouch||this.$element.on("tap.zf.tooltip touchend.zf.tooltip",function(t){i.isActive?i.hide():i.show()}),this.$element.on({"close.zf.trigger":this.hide.bind(this)}),this.$element.on("focus.zf.tooltip",function(t){if(s=!0,i.isClick)return!1;i.show()}).on("focusout.zf.tooltip",function(t){s=!1,i.isClick=!1,i.hide()}).on("resizeme.zf.trigger",function(){i.isActive&&i._setPosition()})}},{key:"toggle",value:function t(){this.isActive?this.hide():this.show()}},{key:"destroy",value:function t(){this.$element.attr("title",this.template.text()).off(".zf.trigger .zf.tootip").removeAttr("aria-describedby").removeAttr("data-yeti-box").removeAttr("data-toggle").removeAttr("data-resize"),this.template.remove(),Foundation.unregisterPlugin(this)}}]),t}();t.defaults={disableForTouch:!1,hoverDelay:200,fadeInDuration:150,fadeOutDuration:150,disableHover:!1,templateClasses:"",tooltipClass:"tooltip",triggerClass:"has-tip",showOn:"small",template:"",tipText:"",touchCloseText:"Tap to close.",clickOpen:!0,positionClass:"",vOffset:10,hOffset:12},Foundation.plugin(t,"Tooltip")}(jQuery);